{"remainingRequest":"/Users/yukang/Desktop/Django-2.2.5/testdj/hello/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yukang/Desktop/Django-2.2.5/testdj/hello/src/components/Add_cust.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yukang/Desktop/Django-2.2.5/testdj/hello/src/components/Add_cust.vue","mtime":1574868337761},{"path":"/Users/yukang/Desktop/Django-2.2.5/testdj/hello/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yukang/Desktop/Django-2.2.5/testdj/hello/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yukang/Desktop/Django-2.2.5/testdj/hello/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yukang/Desktop/Django-2.2.5/testdj/hello/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgb3B0aW9uczogW10sCiAgICAgIGZvcm06IHsKICAgICAgICBuYW1lOiAnJywKICAgICAgICB0ZXh0OiAnJywKICAgICAgICBiZWxvbmc6IDAsCiAgICAgICAgbGFiZWw6ICcnLAogICAgICAgIHNlY29uZGFyeTE6ICcnLAogICAgICAgIHNlY29uZGFyeTI6ICcnLAogICAgICAgIHNlY29uZGFyeTM6ICcnLAogICAgICAgIHNlY29uZGFyeTogJycKICAgICAgfSwKICAgICAgcnVsZXM6IHsKICAgICAgICBuYW1lOiBbCiAgICAgICAgICB7cmVxdWlyZWQ6dHJ1ZSwgbWVzc2FnZTon5qCH6aKY5LiN6IO95Li656m6JywgdHJpZ2dlcjonYmx1cid9LAogICAgICAgICAgLy8ge3R5cGU6ICdlbWFpbCcsIG1lc3NhZ2U6J+mCrueuseagvOW8j+mUmeivrycsIHRyaWdnZXI6WydjaGFuZ2UnLCAnYmx1ciddfQogICAgICAgIF0sCiAgICAgICAgdGV4dDogWwogICAgICAgICAge3JlcXVpcmVkOnRydWUsIG1lc3NhZ2U6J+aWh+acrOS4jeiDveS4uuepuicsdHJpZ2dlcjonYmx1cid9CiAgICAgICAgXSwKICAgICAgfQogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgc3VibWl0Rm9ybShmb3JtbmFtZSkgewogICAgICB0aGlzLiRyZWZzW2Zvcm1uYW1lXS52YWxpZGF0ZSgodmFsaWQpID0+IHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIHRoaXMuJGh0dHAKICAgICAgICAgICAgLnBvc3QoJy9hZGRfY3VzdCcsIHRoaXMuZm9ybSkKICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhWydlcnJvcl9udW0nXSA9PSAwKXsKICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgICAgbWVzc2FnZTogcmVzcG9uc2UuZGF0YVsnbXNnJ10sCiAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGVsc2V7CiAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHJlc3BvbnNlLmRhdGFbJ21zZyddKQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKQogICAgICAgICAgICB9KQogICAgICAgICAgdGhpcy4kaHR0cAogICAgICAgICAgICAucG9zdCgnL2FkZF93b3JkcycsIHRoaXMuZm9ybSkKICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhWydlcnJvcl9udW0nXSA9PSAwKXsKICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgICAgbWVzc2FnZTogcmVzcG9uc2UuZGF0YVsnbXNnJ10sCiAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGVsc2V7CiAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHJlc3BvbnNlLmRhdGFbJ21zZyddKQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKQogICAgICAgICAgICB9KQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25zb2xlLmxvZygnZXJyb3Igc3VibWl0ISEnKTsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIHJlc2V0Rm9ybShmb3JtTmFtZSkgewogICAgICAgIHRoaXMuJHJlZnNbZm9ybU5hbWVdLnJlc2V0RmllbGRzKCk7CiAgICB9LAogICAgaWRlbnRpZnkoKSB7CiAgICAgIGNvbnNvbGUubG9nKHRoaXMuZm9ybSk7CiAgICAgIHRoaXMuJGh0dHAKICAgICAgICAgIC5wb3N0KCcvY25uJywgdGhpcy5mb3JtKQogICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZS5kYXRhKTsKICAgICAgICAgICAgdGhpcy5mb3JtWydsYWJlbCddID0gcmVzcG9uc2UuZGF0YVsnbGFiZWwnXQogICAgICAgICAgICB0aGlzLmZvcm1bJ3NlY29uZGFyeSddID0gcmVzcG9uc2UuZGF0YVsnc2Vjb25kYXJ5J10KICAgICAgICAgICAgbGV0IHJlcyA9IHRoaXMuZm9ybVsnc2Vjb25kYXJ5J10uc3BsaXQoJywgJykKICAgICAgICAgICAgY29uc29sZS5sb2cocmVzKQogICAgICAgICAgICB0aGlzLmZvcm1bJ3NlY29uZGFyeTEnXSA9IHJlc1swXSAKICAgICAgICAgICAgdGhpcy5mb3JtWydzZWNvbmRhcnkyJ10gPSByZXNbMV0KICAgICAgICAgICAgdGhpcy5mb3JtWydzZWNvbmRhcnkzJ10gPSByZXNbMl0KICAgICAgICAgICAgdGhpcy5mb3JtWydiZWxvbmcnXSA9IE51bWJlcihzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdpZCcpKQogICAgICAgICAgICAvLyB0aGlzLnJlbG9hZCgpOwogICAgICAgICAgfSkKICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpCiAgICAgICAgICB9KQogICAgfSwKICB9LAogIG1vdW50ZWQoKSB7CiAgICBsZXQgX190aGlzID0gdGhpcwogICAgdGhpcy4kaHR0cAogICAgLnBvc3QoJy9zaG93X2xhYmVscycpCiAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGFbJ2xpc3QnXSk7CiAgICAgIHJlc3BvbnNlLmRhdGFbJ2xpc3QnXS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgX190aGlzLm9wdGlvbnMucHVzaCh7bGFiZWw6IGl0ZW1bJ2ZpZWxkcyddWyduYW1lJ10sCiAgICAgICAgICB2YWx1ZTogaXRlbVsnZmllbGRzJ11bJ2lkJ119KQogICAgICB9KQogICAgfSkKICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsgLy8g6K+35rGC5aSx6LSl5aSE55CGCiAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgIH0pOwogIH0KfQo="},{"version":3,"sources":["Add_cust.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Add_cust.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div style=\"margin:0px auto; margin-top: 30px\">\n    <span style=\"color: #409EFF; font-size: 20px\">上传用户</span>\n    <el-upload\n        style=\"margin-top: 10px\"\n        class=\"upload-demo\"\n        ref=\"upload\"\n        action=\"https://jsonplaceholder.typicode.com/posts/\"\n        :on-preview=\"handlePreview\"\n        :on-remove=\"handleRemove\"\n        :file-list=\"fileList\"\n        :auto-upload=\"false\">\n        <el-button slot=\"trigger\" size=\"small\" type=\"primary\">批量上传</el-button>\n        <el-button style=\"margin-left: 10px;\" size=\"small\" type=\"success\" @click=\"submitUpload\">上传到服务器</el-button>\n        <div slot=\"tip\" class=\"el-upload__tip\">批量上传社交用户，包括昵称及文本数据等</div>\n    </el-upload>\n    <el-form ref=\"form\" status-icon label-width=\"80px\" :model=\"form\" :rules=\"rules\">\n      <el-form-item></el-form-item>\n    <el-form-item label=\"用户呢称\" prop=\"name\">\n      <el-input v-model=\"form.name\" style=\"width: 500px\"></el-input>\n    </el-form-item>\n    <el-form-item label=\"用户文本\" prop=\"text\">\n     <el-input type=\"textarea\" rows=\"5\" v-model=\"form.text\" placeholder=\"添加一条用户文本数据\"></el-input>\n    </el-form-item>\n    <el-form-item label=\"一级标签\" prop=\"label\">\n      <el-select v-model=\"form.label\" style=\"width: 100%\" placeholder=\"请自主选择或自动识别\">\n        <el-option v-for=\"item in options\"\n              :key=\"item.label\"\n              :label=\"item.label\"\n              :value=\"item.label\">\n        </el-option>\n      </el-select>\n    </el-form-item>\n    <el-form-item label='关键词' prop=\"secondary\">\n      <el-input v-model=\"form.secondary\"></el-input>\n    </el-form-item>\n    <el-form-item>\n      <el-button type=\"primary\" @click=\"submitForm('form')\">添加</el-button>\n      <el-button @click=\"identify\">自动识别</el-button>\n      <el-button @click=\"resetForm('form')\">取消</el-button>\n    </el-form-item>\n  </el-form>\n  </div>\n</template>\n\n<script>\n  export default {\n    data() {\n      return {\n        options: [],\n        form: {\n          name: '',\n          text: '',\n          belong: 0,\n          label: '',\n          secondary1: '',\n          secondary2: '',\n          secondary3: '',\n          secondary: ''\n        },\n        rules: {\n          name: [\n            {required:true, message:'标题不能为空', trigger:'blur'},\n            // {type: 'email', message:'邮箱格式错误', trigger:['change', 'blur']}\n          ],\n          text: [\n            {required:true, message:'文本不能为空',trigger:'blur'}\n          ],\n        }\n      }\n    },\n    methods: {\n      submitForm(formname) {\n        this.$refs[formname].validate((valid) => {\n          if (valid) {\n            this.$http\n              .post('/add_cust', this.form)\n              .then(response => {\n                if (response.data['error_num'] == 0){\n                  this.$message({\n                  message: response.data['msg'],\n                  type: 'success'\n                  })\n                }\n                else{\n                  this.$message.error(response.data['msg'])\n                }\n              })\n              .catch(function (error) {\n                console.log(error)\n              })\n            this.$http\n              .post('/add_words', this.form)\n              .then(response => {\n                if (response.data['error_num'] == 0){\n                  this.$message({\n                  message: response.data['msg'],\n                  type: 'success'\n                  })\n                }\n                else{\n                  this.$message.error(response.data['msg'])\n                }\n              })\n              .catch(function (error) {\n                console.log(error)\n              })\n          } else {\n            console.log('error submit!!');\n            return false;\n          }\n        });\n      },\n      resetForm(formName) {\n          this.$refs[formName].resetFields();\n      },\n      identify() {\n        console.log(this.form);\n        this.$http\n            .post('/cnn', this.form)\n            .then(response => {\n              console.log(response.data);\n              this.form['label'] = response.data['label']\n              this.form['secondary'] = response.data['secondary']\n              let res = this.form['secondary'].split(', ')\n              console.log(res)\n              this.form['secondary1'] = res[0] \n              this.form['secondary2'] = res[1]\n              this.form['secondary3'] = res[2]\n              this.form['belong'] = Number(sessionStorage.getItem('id'))\n              // this.reload();\n            })\n            .catch(function (error) {\n              console.log(error)\n            })\n      },\n    },\n    mounted() {\n      let __this = this\n      this.$http\n      .post('/show_labels')\n      .then(response => {\n        console.log(response.data['list']);\n        response.data['list'].forEach(function (item) {\n          __this.options.push({label: item['fields']['name'],\n            value: item['fields']['id']})\n        })\n      })\n      .catch(function (error) { // 请求失败处理\n        console.log(error);\n      });\n    }\n  }\n</script>"]}]}