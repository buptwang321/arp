{"remainingRequest":"/Users/yukang/Desktop/Django-2.2.5/testdj/hello/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yukang/Desktop/Django-2.2.5/testdj/hello/src/components/Add_cust.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yukang/Desktop/Django-2.2.5/testdj/hello/src/components/Add_cust.vue","mtime":1575897467568},{"path":"/Users/yukang/Desktop/Django-2.2.5/testdj/hello/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yukang/Desktop/Django-2.2.5/testdj/hello/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yukang/Desktop/Django-2.2.5/testdj/hello/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yukang/Desktop/Django-2.2.5/testdj/hello/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgYmVsb25nOiB7CiAgICAgICAgYmVsb25nOiBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdpZCcpLAogICAgICB9LAogICAgICBvcHRpb25zOiBbXSwKICAgICAgZmlsZWxpc3Q6IFtdLAogICAgICBmb3JtOiB7CiAgICAgICAgbmFtZTogJycsCiAgICAgICAgdGV4dDogJycsCiAgICAgICAgYmVsb25nOiAwLAogICAgICAgIGxhYmVsOiAnJywKICAgICAgICBzZWNvbmRhcnkxOiAnJywKICAgICAgICBzZWNvbmRhcnkyOiAnJywKICAgICAgICBzZWNvbmRhcnkzOiAnJywKICAgICAgICBzZWNvbmRhcnk6ICcnCiAgICAgIH0sCiAgICAgIHJ1bGVzOiB7CiAgICAgICAgbmFtZTogWwogICAgICAgICAge3JlcXVpcmVkOnRydWUsIG1lc3NhZ2U6J+agh+mimOS4jeiDveS4uuepuicsIHRyaWdnZXI6J2JsdXInfSwKICAgICAgICAgIC8vIHt0eXBlOiAnZW1haWwnLCBtZXNzYWdlOifpgq7nrrHmoLzlvI/plJnor68nLCB0cmlnZ2VyOlsnY2hhbmdlJywgJ2JsdXInXX0KICAgICAgICBdLAogICAgICAgIHRleHQ6IFsKICAgICAgICAgIHtyZXF1aXJlZDp0cnVlLCBtZXNzYWdlOifmlofmnKzkuI3og73kuLrnqbonLHRyaWdnZXI6J2JsdXInfQogICAgICAgIF0sCiAgICAgIH0KICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIHN1Ym1pdEZvcm0oZm9ybW5hbWUpIHsKICAgICAgdGhpcy4kcmVmc1tmb3JtbmFtZV0udmFsaWRhdGUoKHZhbGlkKSA9PiB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICB0aGlzLiRodHRwCiAgICAgICAgICAgIC5wb3N0KCcvYWRkX2N1c3QnLCB0aGlzLmZvcm0pCiAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YVsnZXJyb3JfbnVtJ10gPT0gMCl7CiAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHJlc3BvbnNlLmRhdGFbJ21zZyddLAogICAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBlbHNlewogICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihyZXNwb25zZS5kYXRhWydtc2cnXSkKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcikKICAgICAgICAgICAgfSkKICAgICAgICAgIHRoaXMuJGh0dHAKICAgICAgICAgICAgLnBvc3QoJy9hZGRfd29yZHMnLCB0aGlzLmZvcm0pCiAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YVsnZXJyb3JfbnVtJ10gPT0gMCl7CiAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHJlc3BvbnNlLmRhdGFbJ21zZyddLAogICAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBlbHNlewogICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihyZXNwb25zZS5kYXRhWydtc2cnXSkKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcikKICAgICAgICAgICAgfSkKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY29uc29sZS5sb2coJ2Vycm9yIHN1Ym1pdCEhJyk7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICByZXNldEZvcm0oZm9ybU5hbWUpIHsKICAgICAgICB0aGlzLiRyZWZzW2Zvcm1OYW1lXS5yZXNldEZpZWxkcygpOwogICAgfSwKICAgIGlkZW50aWZ5KCkgewogICAgICBjb25zb2xlLmxvZyh0aGlzLmZvcm0pOwogICAgICB0aGlzLiRodHRwCiAgICAgICAgICAucG9zdCgnL2NubicsIHRoaXMuZm9ybSkKICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICAgIHRoaXMuZm9ybVsnbGFiZWwnXSA9IHJlc3BvbnNlLmRhdGFbJ2xhYmVsJ10KICAgICAgICAgICAgdGhpcy5mb3JtWydzZWNvbmRhcnknXSA9IHJlc3BvbnNlLmRhdGFbJ3NlY29uZGFyeSddCiAgICAgICAgICAgIGxldCByZXMgPSB0aGlzLmZvcm1bJ3NlY29uZGFyeSddLnNwbGl0KCcsICcpCiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcykKICAgICAgICAgICAgdGhpcy5mb3JtWydzZWNvbmRhcnkxJ10gPSByZXNbMF0gCiAgICAgICAgICAgIHRoaXMuZm9ybVsnc2Vjb25kYXJ5MiddID0gcmVzWzFdCiAgICAgICAgICAgIHRoaXMuZm9ybVsnc2Vjb25kYXJ5MyddID0gcmVzWzJdCiAgICAgICAgICAgIHRoaXMuZm9ybVsnYmVsb25nJ10gPSBOdW1iZXIoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnaWQnKSkKICAgICAgICAgICAgLy8gdGhpcy5yZWxvYWQoKTsKICAgICAgICAgIH0pCiAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKQogICAgICAgICAgfSkKICAgIH0sCiAgICBzdWJtaXRVcGxvYWQoKSB7CiAgICAgIGNvbnNvbGUubG9nKHRoaXMuZmlsZWxpc3QpCiAgICAgIHRoaXMuJHJlZnMudXBsb2FkLnN1Ym1pdCgpOwogICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICfkuIrkvKDmiJDlip8nLAogICAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnCiAgICAgICAgICAgICAgICB9KQogICAgfSwKICB9LAogIG1vdW50ZWQoKSB7CiAgICBsZXQgX190aGlzID0gdGhpcwogICAgdGhpcy4kaHR0cAogICAgLnBvc3QoJy9zaG93X2xhYmVscycpCiAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGFbJ2xpc3QnXSk7CiAgICAgIHJlc3BvbnNlLmRhdGFbJ2xpc3QnXS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgX190aGlzLm9wdGlvbnMucHVzaCh7bGFiZWw6IGl0ZW1bJ2ZpZWxkcyddWyduYW1lJ10sCiAgICAgICAgICB2YWx1ZTogaXRlbVsnZmllbGRzJ11bJ2lkJ119KQogICAgICB9KQogICAgfSkKICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsgLy8g6K+35rGC5aSx6LSl5aSE55CGCiAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgIH0pOwogIH0KfQo="},{"version":3,"sources":["Add_cust.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Add_cust.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div style=\"margin:0px auto; margin-top: 30px\">\n    <span style=\"color: #409EFF; font-size: 20px\">上传用户</span>\n    <el-upload\n        style=\"margin-top: 10px\"\n        class=\"upload-demo\"\n        ref=\"upload\"\n        action=\"http://127.0.0.1:8000/upload_cust\"\n        :file-list=\"fileList\"\n        :auto-upload=\"false\"\n        :data=\"belong\">\n        <el-button slot=\"trigger\" size=\"small\" type=\"primary\">批量上传</el-button>\n        <el-button style=\"margin-left: 10px;\" size=\"small\" type=\"success\" @click=\"submitUpload\">上传到服务器</el-button>\n        <div slot=\"tip\" class=\"el-upload__tip\">批量上传社交用户，包括昵称及文本数据等</div>\n    </el-upload>\n    <el-form ref=\"form\" status-icon label-width=\"80px\" :model=\"form\" :rules=\"rules\">\n      <el-form-item></el-form-item>\n    <el-form-item label=\"用户呢称\" prop=\"name\">\n      <el-input v-model=\"form.name\" style=\"width: 500px\"></el-input>\n    </el-form-item>\n    <el-form-item label=\"用户文本\" prop=\"text\">\n     <el-input type=\"textarea\" rows=\"5\" v-model=\"form.text\" placeholder=\"添加一条用户文本数据\"></el-input>\n    </el-form-item>\n    <el-form-item label=\"一级标签\" prop=\"label\">\n      <el-select v-model=\"form.label\" style=\"width: 100%\" placeholder=\"请自主选择或自动识别\">\n        <el-option v-for=\"item in options\"\n              :key=\"item.label\"\n              :label=\"item.label\"\n              :value=\"item.label\">\n        </el-option>\n      </el-select>\n    </el-form-item>\n    <el-form-item label='关键词' prop=\"secondary\">\n      <el-input v-model=\"form.secondary\"></el-input>\n    </el-form-item>\n    <el-form-item>\n      <el-button type=\"primary\" @click=\"submitForm('form')\">添加</el-button>\n      <el-button @click=\"identify\">自动识别</el-button>\n      <el-button @click=\"resetForm('form')\">取消</el-button>\n    </el-form-item>\n  </el-form>\n  </div>\n</template>\n\n<script>\n  export default {\n    data() {\n      return {\n        belong: {\n          belong: sessionStorage.getItem('id'),\n        },\n        options: [],\n        filelist: [],\n        form: {\n          name: '',\n          text: '',\n          belong: 0,\n          label: '',\n          secondary1: '',\n          secondary2: '',\n          secondary3: '',\n          secondary: ''\n        },\n        rules: {\n          name: [\n            {required:true, message:'标题不能为空', trigger:'blur'},\n            // {type: 'email', message:'邮箱格式错误', trigger:['change', 'blur']}\n          ],\n          text: [\n            {required:true, message:'文本不能为空',trigger:'blur'}\n          ],\n        }\n      }\n    },\n    methods: {\n      submitForm(formname) {\n        this.$refs[formname].validate((valid) => {\n          if (valid) {\n            this.$http\n              .post('/add_cust', this.form)\n              .then(response => {\n                if (response.data['error_num'] == 0){\n                  this.$message({\n                  message: response.data['msg'],\n                  type: 'success'\n                  })\n                }\n                else{\n                  this.$message.error(response.data['msg'])\n                }\n              })\n              .catch(function (error) {\n                console.log(error)\n              })\n            this.$http\n              .post('/add_words', this.form)\n              .then(response => {\n                if (response.data['error_num'] == 0){\n                  this.$message({\n                  message: response.data['msg'],\n                  type: 'success'\n                  })\n                }\n                else{\n                  this.$message.error(response.data['msg'])\n                }\n              })\n              .catch(function (error) {\n                console.log(error)\n              })\n          } else {\n            console.log('error submit!!');\n            return false;\n          }\n        });\n      },\n      resetForm(formName) {\n          this.$refs[formName].resetFields();\n      },\n      identify() {\n        console.log(this.form);\n        this.$http\n            .post('/cnn', this.form)\n            .then(response => {\n              console.log(response.data);\n              this.form['label'] = response.data['label']\n              this.form['secondary'] = response.data['secondary']\n              let res = this.form['secondary'].split(', ')\n              console.log(res)\n              this.form['secondary1'] = res[0] \n              this.form['secondary2'] = res[1]\n              this.form['secondary3'] = res[2]\n              this.form['belong'] = Number(sessionStorage.getItem('id'))\n              // this.reload();\n            })\n            .catch(function (error) {\n              console.log(error)\n            })\n      },\n      submitUpload() {\n        console.log(this.filelist)\n        this.$refs.upload.submit();\n        this.$message({\n                  message: '上传成功',\n                  type: 'success'\n                  })\n      },\n    },\n    mounted() {\n      let __this = this\n      this.$http\n      .post('/show_labels')\n      .then(response => {\n        console.log(response.data['list']);\n        response.data['list'].forEach(function (item) {\n          __this.options.push({label: item['fields']['name'],\n            value: item['fields']['id']})\n        })\n      })\n      .catch(function (error) { // 请求失败处理\n        console.log(error);\n      });\n    }\n  }\n</script>"]}]}