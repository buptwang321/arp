{"remainingRequest":"/Users/yukang/Desktop/Django-2.2.5/testdj/hello/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yukang/Desktop/Django-2.2.5/testdj/hello/src/components/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yukang/Desktop/Django-2.2.5/testdj/hello/src/components/Login.vue","mtime":1574067310636},{"path":"/Users/yukang/Desktop/Django-2.2.5/testdj/hello/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yukang/Desktop/Django-2.2.5/testdj/hello/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yukang/Desktop/Django-2.2.5/testdj/hello/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yukang/Desktop/Django-2.2.5/testdj/hello/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBpbmplY3Q6IFsncmVsb2FkJ10sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGZvcm06IHsKICAgICAgICBlbWFpbDogJycsCiAgICAgICAgcGFzc3dvcmQ6ICcnLAogICAgICAgIHR5cGU6ICcnCiAgICAgIH0sCiAgICAgIHJ1bGVzOiB7CiAgICAgICAgZW1haWw6IFsKICAgICAgICAgIHtyZXF1aXJlZDp0cnVlLCBtZXNzYWdlOifpgq7nrrHkuI3og73kuLrnqbonLCB0cmlnZ2VyOidibHVyJ30sCiAgICAgICAgICAvLyB7dHlwZTogJ2VtYWlsJywgbWVzc2FnZTon6YKu566x5qC85byP6ZSZ6K+vJywgdHJpZ2dlcjpbJ2NoYW5nZScsICdibHVyJ119CiAgICAgICAgXSwKICAgICAgICBwYXNzd29yZDogWwogICAgICAgICAge3JlcXVpcmVkOnRydWUsIG1lc3NhZ2U6J+WvhueggeS4jeiDveS4uuepuicsdHJpZ2dlcjonYmx1cid9CiAgICAgICAgXSwKICAgICAgICB0eXBlOiBbCiAgICAgICAgICB7cmVxdWlyZWQ6dHJ1ZSwgbWVzc2FnZTogJ+mAieaLqeinkuiJsicsIHRyaWdnZXI6J2JsdXInfQogICAgICAgIF0KICAgICAgfQogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgc3VibWl0Rm9ybShmb3JtbmFtZSkgewogICAgICB0aGlzLiRyZWZzW2Zvcm1uYW1lXS52YWxpZGF0ZSgodmFsaWQpID0+IHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIHRoaXMuJGh0dHAKICAgICAgICAgICAgLnBvc3QoJy9jaGVjaycsIHRoaXMuZm9ybSkKICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhWydlcnJvcl9udW0nXSA9PSAwKXsKICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgICAgbWVzc2FnZTogcmVzcG9uc2UuZGF0YVsnbXNnJ10sCiAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZS5kYXRhWydkYXRhJ10pCiAgICAgICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCdlbWFpbCcsIHJlc3BvbnNlLmRhdGFbJ2RhdGEnXVsnZW1haWwnXSkKICAgICAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ3R5cGUnLCByZXNwb25zZS5kYXRhWydkYXRhJ11bJ3R5cGUnXSkKICAgICAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ2lkJywgcmVzcG9uc2UuZGF0YVsnaWQnXSkKICAgICAgICAgICAgICAgIC8vIHRoaXMuJHNldCgpOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UuZGF0YVsnaWQnXSkKICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhWydkYXRhJ11bJ3R5cGUnXSA9PT0gJ+euoeeQhuWRmCcpewogICAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL2FkbWluJyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIGlmIChyZXNwb25zZS5kYXRhWydkYXRhJ11bJ3R5cGUnXSA9PT0gJ+W5v+WRiuS4uycpewogICAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL2FkdmVydGlzZXJzJyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9wbGF0Zm9ybXMnKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5nbygwKQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBlbHNlewogICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihyZXNwb25zZS5kYXRhWydtc2cnXSkKICAgICAgICAgICAgICB9CgogICAgICAgICAgICB9KQogICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpCiAgICAgICAgICAgIH0pCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCdlcnJvciBzdWJtaXQhIScpOwogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogIHJlc2V0Rm9ybShmb3JtTmFtZSkgewogICAgICB0aGlzLiRyZWZzW2Zvcm1OYW1lXS5yZXNldEZpZWxkcygpOwogICAgfQogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuJGh0dHAKICAgIC5wb3N0KCcvc2hvd191c2VycycpCiAgICAudGhlbihyZXNwb25zZSA9PiAoY29uc29sZS5sb2cocmVzcG9uc2UuZGF0YSkpKQogICAgLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgeyAvLyDor7fmsYLlpLHotKXlpITnkIYKICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgfSk7CiAgfQp9Cg=="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAyBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div style=\"width: 30%; margin: 0px auto; margin-top: 200px\">\n  <el-form ref=\"form\" status-icon :model=\"form\" :rules=\"rules\" label-width=\"80px\">\n    <el-form-item label=\"邮箱\" prop=\"email\">\n      <el-input v-model=\"form.email\"></el-input>\n    </el-form-item>\n    <el-form-item label=\"密码\" prop=\"password\">\n     <el-input type=\"password\" v-model=\"form.password\" autocomplete=\"off\"></el-input>\n    </el-form-item>\n    <el-form-item label=\"登陆角色\" prop=\"type\">\n      <el-radio-group v-model=\"form.type\">\n        <el-radio label=\"平台用户\"></el-radio>\n        <el-radio label=\"广告主\"></el-radio>\n        <el-radio label=\"管理员\"></el-radio>\n      </el-radio-group>\n    </el-form-item>\n    <el-form-item>\n      <el-button type=\"primary\" @click=\"submitForm('form')\">进入系统</el-button>\n      <el-button @click=\"resetForm('form')\">取消</el-button>\n    </el-form-item>\n  </el-form>\n    </div>\n</template>\n\n<script>\n  export default {\n    inject: ['reload'],\n    data() {\n      return {\n        form: {\n          email: '',\n          password: '',\n          type: ''\n        },\n        rules: {\n          email: [\n            {required:true, message:'邮箱不能为空', trigger:'blur'},\n            // {type: 'email', message:'邮箱格式错误', trigger:['change', 'blur']}\n          ],\n          password: [\n            {required:true, message:'密码不能为空',trigger:'blur'}\n          ],\n          type: [\n            {required:true, message: '选择角色', trigger:'blur'}\n          ]\n        }\n      }\n    },\n    methods: {\n      submitForm(formname) {\n        this.$refs[formname].validate((valid) => {\n          if (valid) {\n            this.$http\n              .post('/check', this.form)\n              .then(response => {\n                if (response.data['error_num'] == 0){\n                  this.$message({\n                  message: response.data['msg'],\n                  type: 'success'\n                  })\n                  console.log(response.data['data'])\n                  sessionStorage.setItem('email', response.data['data']['email'])\n                  sessionStorage.setItem('type', response.data['data']['type'])\n                  sessionStorage.setItem('id', response.data['id'])\n                  // this.$set();\n                  console.log(response.data['id'])\n                  if (response.data['data']['type'] === '管理员'){\n                    this.$router.push('/admin');\n                  }\n                  else if (response.data['data']['type'] === '广告主'){\n                    this.$router.push('/advertisers');\n                  }\n                  else {\n                    this.$router.push('/platforms');\n                  }\n                  this.$router.go(0)\n                }\n                else{\n                  this.$message.error(response.data['msg'])\n                }\n\n              })\n              .catch(function (error) {\n                console.log(error)\n              })\n          } else {\n            console.log('error submit!!');\n            return false;\n          }\n        });\n      },\n    resetForm(formName) {\n        this.$refs[formName].resetFields();\n      }\n    },\n    mounted() {\n      this.$http\n      .post('/show_users')\n      .then(response => (console.log(response.data)))\n      .catch(function (error) { // 请求失败处理\n        console.log(error);\n      });\n    }\n  }\n</script>\n"]}]}