{"remainingRequest":"/Users/yukang/Desktop/Django-2.2.5/testdj/hello/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yukang/Desktop/Django-2.2.5/testdj/hello/src/components/Add_ads.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yukang/Desktop/Django-2.2.5/testdj/hello/src/components/Add_ads.vue","mtime":1574865263667},{"path":"/Users/yukang/Desktop/Django-2.2.5/testdj/hello/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yukang/Desktop/Django-2.2.5/testdj/hello/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yukang/Desktop/Django-2.2.5/testdj/hello/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yukang/Desktop/Django-2.2.5/testdj/hello/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgb3B0aW9uczogW10sCiAgICAgIGZvcm06IHsKICAgICAgICBuYW1lOiAnJywKICAgICAgICB0ZXh0OiAnJywKICAgICAgICBsYWJlbDogJycsCiAgICAgICAgYmVsb25nOiAwLAogICAgICAgIHNlY29uZGFyeTE6ICcnLAogICAgICAgIHNlY29uZGFyeTI6ICcnLAogICAgICAgIHNlY29uZGFyeTM6ICcnLAogICAgICAgIHNlY29uZGFyeTogJycKICAgICAgfSwKICAgICAgcnVsZXM6IHsKICAgICAgICBuYW1lOiBbCiAgICAgICAgICB7cmVxdWlyZWQ6dHJ1ZSwgbWVzc2FnZTon5qCH6aKY5LiN6IO95Li656m6JywgdHJpZ2dlcjonYmx1cid9LAogICAgICAgICAgLy8ge3R5cGU6ICdlbWFpbCcsIG1lc3NhZ2U6J+mCrueuseagvOW8j+mUmeivrycsIHRyaWdnZXI6WydjaGFuZ2UnLCAnYmx1ciddfQogICAgICAgIF0sCiAgICAgICAgdGV4dDogWwogICAgICAgICAge3JlcXVpcmVkOnRydWUsIG1lc3NhZ2U6J+aWh+acrOS4jeiDveS4uuepuicsdHJpZ2dlcjonYmx1cid9CiAgICAgICAgXSwKICAgICAgICAvLyBsYWJlbDogWwogICAgICAgIC8vICAge3JlcXVpcmVkOnRydWUsIG1lc3NhZ2U6ICfpgInmi6nop5LoibInLCB0cmlnZ2VyOidibHVyJ30KICAgICAgICAvLyBdCiAgICAgIH0KICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIHN1Ym1pdEZvcm0oZm9ybW5hbWUpIHsKICAgICAgdGhpcy4kcmVmc1tmb3JtbmFtZV0udmFsaWRhdGUoKHZhbGlkKSA9PiB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICBsZXQgcmVzID0gdGhpcy5mb3JtWydzZWNvbmRhcnknXS5zcGxpdCgnLCAnKQogICAgICAgICAgY29uc29sZS5sb2cocmVzKQogICAgICAgICAgdGhpcy5mb3JtWydzZWNvbmRhcnkxJ10gPSByZXNbMF0gCiAgICAgICAgICB0aGlzLmZvcm1bJ3NlY29uZGFyeTInXSA9IHJlc1sxXQogICAgICAgICAgdGhpcy5mb3JtWydzZWNvbmRhcnkzJ10gPSByZXNbMl0KICAgICAgICAgIHRoaXMuJGh0dHAKICAgICAgICAgICAgLnBvc3QoJy9hZGRfYWRzJywgdGhpcy5mb3JtKQogICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGFbJ2Vycm9yX251bSddID09IDApewogICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgICBtZXNzYWdlOiByZXNwb25zZS5kYXRhWydtc2cnXSwKICAgICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgZWxzZXsKICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IocmVzcG9uc2UuZGF0YVsnbXNnJ10pCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KQogICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpCiAgICAgICAgICAgIH0pCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCdlcnJvciBzdWJtaXQhIScpOwogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgcmVzZXRGb3JtKGZvcm1OYW1lKSB7CiAgICAgICAgdGhpcy4kcmVmc1tmb3JtTmFtZV0ucmVzZXRGaWVsZHMoKTsKICAgIH0sCiAgICBpZGVudGlmeSgpIHsKICAgICAgY29uc29sZS5sb2codGhpcy5mb3JtKTsKICAgICAgdGhpcy4kaHR0cAogICAgICAgICAgLnBvc3QoJy9jbm4nLCB0aGlzLmZvcm0pCiAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgICB0aGlzLmZvcm1bJ2xhYmVsJ10gPSByZXNwb25zZS5kYXRhWydsYWJlbCddCiAgICAgICAgICAgIHRoaXMuZm9ybVsnc2Vjb25kYXJ5J10gPSByZXNwb25zZS5kYXRhWydzZWNvbmRhcnknXQogICAgICAgICAgICBsZXQgcmVzID0gdGhpcy5mb3JtWydzZWNvbmRhcnknXS5zcGxpdCgnLCAnKQogICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpCiAgICAgICAgICAgIHRoaXMuZm9ybVsnc2Vjb25kYXJ5MSddID0gcmVzWzBdIAogICAgICAgICAgICB0aGlzLmZvcm1bJ3NlY29uZGFyeTInXSA9IHJlc1sxXQogICAgICAgICAgICB0aGlzLmZvcm1bJ3NlY29uZGFyeTMnXSA9IHJlc1syXQogICAgICAgICAgICB0aGlzLmZvcm1bJ2JlbG9uZyddID0gTnVtYmVyKHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ2lkJykpCiAgICAgICAgICAgIC8vIHRoaXMucmVsb2FkKCk7CiAgICAgICAgICB9KQogICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcikKICAgICAgICAgIH0pCiAgICB9LAogIH0sCiAgbW91bnRlZCgpIHsKICAgIGxldCBfX3RoaXMgPSB0aGlzCiAgICB0aGlzLiRodHRwCiAgICAucG9zdCgnL3Nob3dfbGFiZWxzJykKICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UuZGF0YVsnbGlzdCddKTsKICAgICAgcmVzcG9uc2UuZGF0YVsnbGlzdCddLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICBfX3RoaXMub3B0aW9ucy5wdXNoKHtsYWJlbDogaXRlbVsnZmllbGRzJ11bJ25hbWUnXSwKICAgICAgICAgIHZhbHVlOiBpdGVtWydmaWVsZHMnXVsnaWQnXX0pCiAgICAgIH0pCiAgICB9KQogICAgLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgeyAvLyDor7fmsYLlpLHotKXlpITnkIYKICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgfSk7CiAgfQp9Cg=="},{"version":3,"sources":["Add_ads.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Add_ads.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div style=\"margin:0px auto; margin-top: 60px\">\n    <span style=\"color: #409EFF; font-size: 20px\">发布广告</span>\n    <el-form ref=\"form\" status-icon label-width=\"80px\" :model=\"form\" :rules=\"rules\">\n      <el-form-item></el-form-item>\n    <el-form-item label=\"广告标题\" prop=\"name\">\n      <el-input v-model=\"form.name\" style=\"width: 600px\"></el-input>\n    </el-form-item>\n    <el-form-item label=\"广告文本\" prop=\"text\">\n     <el-input type=\"textarea\" rows=\"5\" v-model=\"form.text\" ></el-input>\n    </el-form-item>\n    <el-form-item label=\"一级标签\" prop=\"label\">\n      <el-select v-model=\"form.label\" style=\"width: 100%\" placeholder=\"请自主选择或自动识别\">\n        <el-option v-for=\"item in options\"\n              :key=\"item.label\"\n              :label=\"item.label\"\n              :value=\"item.label\">\n        </el-option>\n      </el-select>\n    </el-form-item>\n    <el-form-item label='关键词' prop=\"secondary\">\n      <el-input v-model=\"form.secondary\"></el-input>\n    </el-form-item>\n    <el-form-item>\n      <el-button type=\"primary\" @click=\"submitForm('form')\">添加</el-button>\n      <el-button @click=\"identify\">自动识别</el-button>\n      <el-button @click=\"resetForm('form')\">取消</el-button>\n    </el-form-item>\n  </el-form>\n  </div>\n</template>\n\n<script>\n  export default {\n    data() {\n      return {\n        options: [],\n        form: {\n          name: '',\n          text: '',\n          label: '',\n          belong: 0,\n          secondary1: '',\n          secondary2: '',\n          secondary3: '',\n          secondary: ''\n        },\n        rules: {\n          name: [\n            {required:true, message:'标题不能为空', trigger:'blur'},\n            // {type: 'email', message:'邮箱格式错误', trigger:['change', 'blur']}\n          ],\n          text: [\n            {required:true, message:'文本不能为空',trigger:'blur'}\n          ],\n          // label: [\n          //   {required:true, message: '选择角色', trigger:'blur'}\n          // ]\n        }\n      }\n    },\n    methods: {\n      submitForm(formname) {\n        this.$refs[formname].validate((valid) => {\n          if (valid) {\n            let res = this.form['secondary'].split(', ')\n            console.log(res)\n            this.form['secondary1'] = res[0] \n            this.form['secondary2'] = res[1]\n            this.form['secondary3'] = res[2]\n            this.$http\n              .post('/add_ads', this.form)\n              .then(response => {\n                if (response.data['error_num'] == 0){\n                  this.$message({\n                  message: response.data['msg'],\n                  type: 'success'\n                  })\n                }\n                else{\n                  this.$message.error(response.data['msg'])\n                }\n              })\n              .catch(function (error) {\n                console.log(error)\n              })\n          } else {\n            console.log('error submit!!');\n            return false;\n          }\n        });\n      },\n      resetForm(formName) {\n          this.$refs[formName].resetFields();\n      },\n      identify() {\n        console.log(this.form);\n        this.$http\n            .post('/cnn', this.form)\n            .then(response => {\n              console.log(response.data);\n              this.form['label'] = response.data['label']\n              this.form['secondary'] = response.data['secondary']\n              let res = this.form['secondary'].split(', ')\n              console.log(res)\n              this.form['secondary1'] = res[0] \n              this.form['secondary2'] = res[1]\n              this.form['secondary3'] = res[2]\n              this.form['belong'] = Number(sessionStorage.getItem('id'))\n              // this.reload();\n            })\n            .catch(function (error) {\n              console.log(error)\n            })\n      },\n    },\n    mounted() {\n      let __this = this\n      this.$http\n      .post('/show_labels')\n      .then(response => {\n        console.log(response.data['list']);\n        response.data['list'].forEach(function (item) {\n          __this.options.push({label: item['fields']['name'],\n            value: item['fields']['id']})\n        })\n      })\n      .catch(function (error) { // 请求失败处理\n        console.log(error);\n      });\n    }\n  }\n</script>"]}]}